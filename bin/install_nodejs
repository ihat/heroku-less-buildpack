#!/usr/bin/env bash
set -eo pipefail

NODE_VERSION=0.8.12
NODE_BASENAME=node-v${NODE_VERSION}-linux-x64
NODE_ARCHIVE="http://nodejs.org/dist/v${NODE_VERSION}/${NODE_BASENAME}.tar.gz"

# make a temp directory
tempdir="$( mktemp -t node_XXXX )"
rm -rf $tempdir
mkdir -p $tempdir

echo 'tempdir' $tempdir

pushd $tempdir
curl -s -L -o tmp-nodejs.tar.gz $NODE_ARCHIVE
tar -zxvf tmp-nodejs.tar.gz > /dev/null
rm tmp-nodejs.tar.gz
popd

echo 'copying from ' $tempdir/$NODE_BASENAME ' to /app/vendor/node'
cp -R $tempdir/$NODE_BASENAME '/app/vendor/node'
ls -l /app/vendor/node


alias node=/app/vendor/node/bin/node
alias node-waf=/app/vendor/node/bin/node-waf
alias npm=/app/vendor/node/bin/npm
